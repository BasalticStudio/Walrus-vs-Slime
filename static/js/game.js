"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}window.Assets=window.Assets||{},Assets.MainMenu={btn_StartGame:"ui/btn_StartGame.png"},Assets.BattleField={dev_Enemy:"monsters/dev_Enemy.png",dev_Tower:"towers/dev_Tower01.png"},window.States=window.States||{},window.Objects=window.Objects||{},window.Input=window.Input||{},window.Teams={Walrus:0,Slime:1},window.Helper=window.Helper||{},Helper.RetinaFilter=function(t,e){return t},Helper.LoadImages=function(t,e,a){var n="";a=a||0;for(n in e)t.image(n,"img/"+Helper.RetinaFilter(e[n],a))};var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();Input=function(){function t(){_classCallCheck(this,t),this._pointerData=[],this._cameraX=0}return _createClass(t,[{key:"OnTouchStart",value:function(){var t=this;return function(e){t._pointerData.push({x:e.touches[0].clientX,y:e.touches[0].clientY}),t.cameraX=this.camera.x}}},{key:"OnTouchEnd",value:function(){var t=this;return function(e){t._pointerData=[]}}},{key:"OnTouchMove",value:function(){var t=this;return function(e){"BattleField"==this.state.current&&(t._pointerData.push({x:e.touches[0].clientX,y:e.touches[0].clientY}),this.camera.x=t.horizontalDragStep())}}},{key:"horizontalDragStep",value:function(){if(this._pointerData.length<2)return 0;var t=this._pointerData[0],e=this._pointerData.pop();return-1==t.x||-1==e.x?(this._pointerData.shift(),0):this.cameraX-(t.x-e.x)}}]),t}(),function(){window.onload=function(){var t=new Phaser.Game(1024,768,Phaser.AUTO,"");t.state.add("Boot",States.Boot),t.state.add("Preloader",States.Preloader),t.state.add("Loading",States.Loading),t.state.add("MainMenu",States.MainMenu),t.state.add("BattleField",States.BattleField),t.state.start("Boot")}}();var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.Monster=function(t){function e(t,a){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,0,0,a,""),this.active=!0}return _inherits(e,t),_createClass(e,[{key:"update",value:function(){this.active&&this.move()}},{key:"move",value:function(){this.x+=10}}]),e}(Phaser.Sprite);var _get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.Tower=function(t){function e(t,a,n,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,0,a,""),this.team=i}return _inherits(e,t),e}(Phaser.Sprite),States.BattleField=function(t){this.GameScene=null,this.Layer={Background:null,Objects:null,SkillFx:null},this.UI=null,this.enemy=null},States.BattleField.prototype={init:function(){this.initLayers()},create:function(){this.world.setBounds(0,0,3e3,768),this.Layer.Objects.add(new Objects.Tower(this.game,"dev_Tower",0,Teams.Walrus)),this.Layer.Objects.add(new Objects.Tower(this.game,"dev_Tower",2e3,Teams.Slime)),this.Layer.Objects.add(new Objects.Monster(this.game,"dev_Enemy"))},update:function(){},initLayers:function(){this.GameScene=this.add.group(this.world,"GameScene"),this.GameUI=this.add.group(this.world,"UI"),this.Layer.Background=this.add.group(this.GameScene,"Background"),this.Layer.Objects=this.add.group(this.GameScene,"Objects"),this.Layer.SkillFx=this.add.group(this.GameScene,"SkillFx")}},States.Boot={init:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,260,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.device.desktop||(this.stage.scaleMode=Phaser.ScaleManager.EXACT_FIT),this.scale.refresh()},preload:function(){},create:function(){this.state.start("Preloader");var t=new Input;this.input.touch.touchStartCallback=t.OnTouchStart(),this.input.touch.touchMoveCallback=t.OnTouchMove(),this.input.touch.touchEndCallback=t.OnTouchEnd(),this.game.time.advancedTiming=!0},gameResized:function(t,e){}},States.Loading=function(t){this.targetState=null,this.preloadList={}},States.Loading.prototype={init:function(t,e){this.targetState=t,this.preloadList=e||{}},preload:function(){Helper.LoadImages(this.load,this.preloadList,this.game.device.pixelRatio)},update:function(){this.load.hasLoaded&&this.state.start(this.targetState)}},States.MainMenu=function(t){this.ui={startGame:null}},States.MainMenu.prototype={create:function(){var t=this.cache.getImage("btn_StartGame");this.ui.startGame=this.add.button(this.game.width/2-t.width/2,this.game.height/2-t.height/2,"btn_StartGame",this.startGame,this)},update:function(){},startGame:function(){this.state.start("Loading",!0,!1,"BattleField",Assets.BattleField)}},States.Preloader={preload:function(){Helper.LoadImages(this.load,Assets.MainMenu,this.game.device.pixelRatio)},create:function(){},update:function(){this.load.hasLoaded&&this.state.start("MainMenu")}};
//# sourceMappingURL=game.js.map