"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.Assets=window.Assets||{},Assets.MainMenu={btn_StartGame:"ui/btn_StartGame.png"},Assets.BattleField={dev_Enemy:"monsters/dev_Enemy.png",dev_Tower:"towers/dev_Tower01.png",UI_Placehold:"ui/UI_Placehold.png",UI_MonsterCard:"ui/UI_MonsterCard.png",UI_MonsterCardSuper:"ui/UI_MonsterCardSuper.png",btn_LevelUP:"ui/btn_LevelUP.png"},window.Debug=window.Debug||!0,window.States=window.States||{},window.Scenes=window.Scenes||{},window.Objects=window.Objects||{},window.Input=window.Input||{},window.Game=window.Input||{},window.Factory=window.Factory||{},window.Command=window.Command||{},window.Teams={Walrus:0,Slime:1},window.Types={Tower:1e3,Monster:1001},Objects.Monsters={},window.MonsterType={Normal:0,HighDamage:1,HighSpeed:2,HighDefense:3,Ranger:4,Super:5},window.Settings={UI:{Height:200}},window.Helper=window.Helper||{},Helper.RetinaFilter=function(t,e){return t},Helper.LoadImages=function(t,e,a){var n="";a=a||0;for(n in e)t.image(n,"img/"+Helper.RetinaFilter(e[n],a))},Helper.CalcLand=function(t,e){var a=t.height,n=e.height/2;return a-Settings.UI.Height-n};var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();Input=function(){function t(){_classCallCheck(this,t),this._pointerData=[],this._cameraX=0}return _createClass(t,[{key:"OnTouchStart",value:function(){var t=this;return function(e){t._pointerData.push({x:e.touches[0].clientX,y:e.touches[0].clientY}),t.cameraX=this.camera.x}}},{key:"OnTouchEnd",value:function(){var t=this;return function(e){t._pointerData=[]}}},{key:"OnTouchMove",value:function(){var t=this;return function(e){"BattleField"==this.state.current&&(t._pointerData.push({x:e.touches[0].clientX,y:e.touches[0].clientY}),this.camera.x=t.horizontalDragStep())}}},{key:"OnKeyPress",value:function(){return function(t,e){if("BattleField"==this.game.state.current){var a=this.game.state.getCurrentState();(t==Phaser.Keyboard.RIGHT||"d"==t)&&(a.ScrollDirection=Input.SCROLL_DIRECTION.RIGHT),(t==Phaser.Keyboard.LEFT||"a"==t)&&(a.ScrollDirection=Input.SCROLL_DIRECTION.LEFT)}}}},{key:"OnKeyUp",value:function(){return function(t,e){if("BattleField"==this.game.state.current){var a=this.game.state.getCurrentState();a.ScrollDirection=Input.SCROLL_DIRECTION.STOP}}}},{key:"horizontalDragStep",value:function(){if(this._pointerData.length<2)return 0;var t=this._pointerData[0],e=this._pointerData.pop();return-1==t.x||-1==e.x?(this._pointerData.shift(),0):this.cameraX-(t.x-e.x)}}],[{key:"SCROLL_SPEED",get:function(){return 20}},{key:"SCROLL_DIRECTION",get:function(){return{STOP:0,LEFT:1,RIGHT:2}}}]),t}(),window.MonsterData=window.MonsterData||{},MonsterData[Teams.Walrus]={},MonsterData[Teams.Slime]={},MonsterData[Teams.Walrus][MonsterType.Normal]={Health:500,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Walrus][MonsterType.HighAttack]={Health:500,Attack:200,AttackSpeed:.25,Speed:200,MinDamageRatio:.9,MaxDamageRatio:1.3},MonsterData[Teams.Walrus][MonsterType.HighSpeed]={Health:250,Attack:100,AttackSpeed:.25,Speed:600,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Walrus][MonsterType.HighDefense]={Health:1500,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Walrus][MonsterType.Ranger]={Health:250,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Walrus][MonsterType.Super]={Health:1500,Attack:200,AttackSpeed:.25,Speed:100,MinDamageRatio:.9,MaxDamageRatio:1.3},MonsterData[Teams.Slime][MonsterType.Normal]={Health:500,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Slime][MonsterType.HighAttack]={Health:500,Attack:200,AttackSpeed:.25,Speed:200,MinDamageRatio:.9,MaxDamageRatio:1.3},MonsterData[Teams.Slime][MonsterType.HighSpeed]={Health:250,Attack:100,AttackSpeed:.25,Speed:600,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Slime][MonsterType.HighDefense]={Health:1500,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Slime][MonsterType.Ranger]={Health:250,Attack:100,AttackSpeed:.25,Speed:300,MinDamageRatio:.8,MaxDamageRatio:1.2},MonsterData[Teams.Slime][MonsterType.Super]={Health:1500,Attack:200,AttackSpeed:.25,Speed:100,MinDamageRatio:.9,MaxDamageRatio:1.3};var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();Factory.Tower=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"generatePlayer",value:function(t){return new Objects.Tower(t,Factory.Tower.getView(Game.team),300,Game.team)}},{key:"generateEnemy",value:function(t){var e=null;return e=Game.team==Teams.Walrus?Teams.Slime:Teams.Walrus,new Objects.Tower(t,Factory.Tower.getView(e),3700,e)}},{key:"getView",value:function(t){var e="";switch(t){case Teams.Walrus:e="dev_Tower";break;case Teams.Slime:e="dev_Tower"}return e}}]),t}(),function(){window.onload=function(){var t=new Phaser.Game(1024,768,Phaser.AUTO,"");t.state.add("Boot",Scenes.Boot),t.state.add("Preloader",Scenes.Preloader),t.state.add("Loading",Scenes.Loading),t.state.add("MainMenu",Scenes.MainMenu),t.state.add("BattleField",Scenes.BattleField),t.state.start("Boot")}}();var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.GameUI=function(t){function e(t,a,n,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,a,n),this.fixedToCamera=!0,this.scene=i,this.initMonsterCard(),this.initUI()}return _inherits(e,t),_createClass(e,[{key:"initMonsterCard",value:function(){this.game.add.image(0,568,"UI_Placehold","",this),this.add(new Objects.MonsterCardUI(this.game,0,568,"UI_MonsterCard",MonsterType.Nomral)),this.add(new Objects.MonsterCardUI(this.game,120,568,"UI_MonsterCard",MonsterType.Nomral)),this.add(new Objects.MonsterCardUI(this.game,240,568,"UI_MonsterCard",MonsterType.Nomral)),this.add(new Objects.MonsterCardUI(this.game,360,568,"UI_MonsterCard",MonsterType.Nomral)),this.add(new Objects.MonsterCardUI(this.game,480,568,"UI_MonsterCard",MonsterType.Nomral)),this.add(new Objects.MonsterCardUI(this.game,600,568,"UI_MonsterCardSuper",MonsterType.Nomral)),this.add(new Objects.LevelUpUI(this.game,840,586))}},{key:"initUI",value:function(){this.add(new Objects.ManaUI(this.game,40,20,this.scene.PlayerTower))}}]),e}(Phaser.Group);var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.LevelUpUI=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,a,n,"btn_LevelUP"),this.onInputUp.add(this.onClick,this)}return _inherits(e,t),_createClass(e,[{key:"onClick",value:function(){}}]),e}(Phaser.Button);var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.ManaUI=function(t){function e(t,a,n,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,a,n,"Mana: 0/0",{font:"normal 24px 'Open Sans'",fill:"#FFF"}),this.tower=i}return _inherits(e,t),_createClass(e,[{key:"update",value:function(){this.setText("Mana: "+this.tower._mana+"/"+this.tower._maxMana)}}]),e}(Phaser.Text);var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};!function(){Objects.Monsters={};var t=function(t){function e(t,a,n,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,0,a,""),this.y=Helper.CalcLand(this.game,this),t.physics.enable(this,Phaser.Physics.P2JS,Debug),this.team=i,this.active=!0,this.state=States.MonsterMove,this.type=Types.Monster,this._attackTarget=null,this._speed=300,this._health=500,this._damage=20,this._minDamageRatio=.8,this._maxDamageRatio=1.2,this._attackSpeed=.25,this._cost=100,this._coolDown=!1,this.initCollision()}return _inherits(e,t),_createClass(e,[{key:"initCollision",value:function(){if("BattleField"==this.game.state.current){var t=this.game.state.getCurrentState();switch(this.team){case Teams.Walrus:this.body.setCollisionGroup(t.CollisionGroup.Walrus),this.body.collides(t.CollisionGroup.Slime);break;case Teams.Slime:this.body.setCollisionGroup(t.CollisionGroup.Slime),this.body.collides(t.CollisionGroup.Walrus)}this.body.onBeginContact.add(this.onBeginContact,this),this.body.onEndContact.add(this.onEndContact,this)}}},{key:"update",value:function(){this.body.setZeroVelocity(),this.body.setZeroRotation(),this.state.update(this)}},{key:"onBeginContact",value:function(t){this.attackTarget=t.sprite,this.state.handleEvent(this,States.Monster.Events.BeginContact)}},{key:"onEndContact",value:function(t){this.attackTarget=null,this.state.handleEvent(this,States.Monster.Events.EndContact)}},{key:"setState",value:function(t){this.state=t}},{key:"move",value:function(){this.team==Game.team?this.body.moveRight(this._speed):this.body.moveLeft(this._speed)}},{key:"tryAttack",value:function(){if(this.attackTarget.team!=this.team&&!this._coolDown)switch(this.attackTarget.type){case Types.Tower:case Types.Monster:this.attackTarget.damage(this.game.rnd.realInRange(this._damage*this._minDamageRatio,this._damage*this._maxDamageRatio)),this.coolDown()}}},{key:"coolDown",value:function(){var t=this;this._coolDown=!0,this.game.time.events.add(Phaser.Timer.SECOND*this._attackSpeed,function(){t._coolDown=!1})}},{key:"damage",value:function(t){this._health-=t,this._health<=0&&this.destroy()}},{key:"setupStatus",value:function(t){this._damage=t.Attack,this._speed=t.Speed,this._health=t.Health,this._attackSpeed=t.AttackSpeed,this._minDamageRatio=t.MinDamageRatio,this._maxDamageRatio=t.MaxDamageRatio}}],[{key:"Cost",get:function(){return 100}}]),e}(Phaser.Sprite);Objects.Monsters.Normal=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.Normal];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 100}}]),e}(t),Objects.Monsters.Attack=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.HighAttack];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 250}}]),e}(t),Objects.Monsters.Defense=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.HighDefense];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 250}}]),e}(t),Objects.Monsters.Speed=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.HighSpeed];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 250}}]),e}(t),Objects.Monsters.Ranger=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.Ranger];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 200}}]),e}(t),Objects.Monsters.Super=function(t){function e(t,a,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,"dev_Enemy",a,n);var i=MonsterData[n][MonsterType.Super];this.setupStatus(i)}return _inherits(e,t),_createClass(e,null,[{key:"Cost",get:function(){return 1e3}}]),e}(t)}();var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.MonsterCardUI=function(t){function e(t,a,n,i,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,a,n,i),this.monsterType=r,this.onInputUp.add(this.onClick,this)}return _inherits(e,t),_createClass(e,[{key:"onClick",value:function(){}}]),e}(Phaser.Button);var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}};Objects.Tower=function(t){function e(t,a,n,i){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n,0,a,""),this.y=Helper.CalcLand(this.game,this),t.physics.enable(this,Phaser.Physics.P2JS,Debug),this.body.kinematic=!0,this.team=i,this.type=Types.Tower,this._health=1e3,this._mana=0,this._maxMana=500,this._manaRecover=10,this._rank=1,this.game.time.events.loop(.5*Phaser.Timer.SECOND,this.recoverMana,this),this.initCollision()}return _inherits(e,t),_createClass(e,[{key:"initCollision",value:function(){if("BattleField"==this.game.state.current){var t=this.game.state.getCurrentState();switch(this.team){case Teams.Walrus:this.body.setCollisionGroup(t.CollisionGroup.Walrus),this.body.collides(t.CollisionGroup.Slime);break;case Teams.Slime:this.body.setCollisionGroup(t.CollisionGroup.Slime),this.body.collides(t.CollisionGroup.Walrus)}}}},{key:"damage",value:function(t){this._health-=t,this._health<=0&&this.destroy()}},{key:"recoverMana",value:function(){this._mana+=this._manaRecover,this._mana>this._maxMana&&(this._mana=this._maxMana)}}]),e}(Phaser.Sprite),Scenes.BattleField=function(t){this.GameScene=null,this.Layer={Background:null,Objects:null,SkillFx:null},this.UI=null,this.CollisionGroup={Walrus:null,Slime:null},this.ScrollDirection=Input.SCROLL_DIRECTION.STOP,this.PlayerTower=null,this.EnemyTower=null},Scenes.BattleField.prototype={init:function(){this.initLayers(),this.initPhysics(),this.initGame(),this.initUI()},create:function(){this.world.setBounds(0,0,4e3,768),this.Layer.Objects.add(this.PlayerTower),this.Layer.Objects.add(this.EnemyTower)},update:function(){this.handleScrolling()},initLayers:function(){this.GameScene=this.add.group(this.world,"GameScene"),this.Layer.Background=this.add.group(this.GameScene,"Background"),this.Layer.Objects=this.add.group(this.GameScene,"Objects"),this.Layer.SkillFx=this.add.group(this.GameScene,"SkillFx")},initPhysics:function(){this.game.physics.p2.setImpactEvents(!0),this.CollisionGroup.Slime=this.game.physics.p2.createCollisionGroup(),this.CollisionGroup.Walrus=this.game.physics.p2.createCollisionGroup()},initGame:function(){this.PlayerTower=Factory.Tower.generatePlayer(this.game),this.EnemyTower=Factory.Tower.generateEnemy(this.game)},initUI:function(){this.UI=new Objects.GameUI(this.game,this.world,"UI",this)},handleScrolling:function(){switch(this.ScrollDirection){case Input.SCROLL_DIRECTION.RIGHT:this.camera.x+=Input.SCROLL_SPEED;break;case Input.SCROLL_DIRECTION.LEFT:this.camera.x-=Input.SCROLL_SPEED}}},Scenes.Boot={init:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,260,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.device.desktop||(this.stage.scaleMode=Phaser.ScaleManager.EXACT_FIT),this.scale.refresh()},preload:function(){},create:function(){this.state.start("Preloader");var t=new Input;this.input.touch.touchStartCallback=t.OnTouchStart(),this.input.touch.touchMoveCallback=t.OnTouchMove(),this.input.touch.touchEndCallback=t.OnTouchEnd(),this.input.keyboard.onPressCallback=t.OnKeyPress(),this.input.keyboard.onUpCallback=t.OnKeyUp(),this.game.time.advancedTiming=!0,this.physics.startSystem(Phaser.Physics.P2JS)},gameResized:function(t,e){}},Scenes.Loading=function(t){this.targetState=null,this.preloadList={}},Scenes.Loading.prototype={init:function(t,e){this.targetState=t,this.preloadList=e||{}},preload:function(){Helper.LoadImages(this.load,this.preloadList,this.game.device.pixelRatio)},update:function(){this.load.hasLoaded&&this.state.start(this.targetState)}},Scenes.MainMenu=function(t){this.ui={startGame:null}},Scenes.MainMenu.prototype={create:function(){var t=this.cache.getImage("btn_StartGame");this.ui.startGame=this.add.button(this.game.width/2-t.width/2,this.game.height/2-t.height/2,"btn_StartGame",this.startGame,this)},update:function(){},startGame:function(){this.state.start("Loading",!0,!1,"BattleField",Assets.BattleField)}},Scenes.Preloader={preload:function(){Helper.LoadImages(this.load,Assets.MainMenu,this.game.device.pixelRatio)},create:function(){},update:function(){this.load.hasLoaded&&this.state.start("MainMenu")}};var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();!function(){var t=function(){function t(){_classCallCheck(this,t),this.team=Teams.Walrus}return _createClass(t,[{key:"setTeam",value:function(t){this.team=t}}]),t}();Game=new t}();var _get=function(t,e,a){for(var n=!0;n;){var i=t,r=e,o=a;s=l=c=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=r,a=o,n=!0}},_createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();!function(){var t={BeginContact:0,EndContact:1,Dead:2},e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"handleEvent",value:function(t,a){return t.SetState(e.MoveState)}},{key:"update",value:function(){}}],[{key:"MoveState",get:function(){return States.MonsterMove}},{key:"AttackState",get:function(){return States.MonsterAttack}},{key:"DeadState",get:function(){return States.DeadState}},{key:"Events",get:function(){return t}}]),e}(),a=function(e){function a(){_classCallCheck(this,a),_get(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}return _inherits(a,e),_createClass(a,[{key:"handleEvent",value:function(e,a){switch(a){case t.BeginContact:e.setState(States.MonsterAttack)}}},{key:"update",value:function(t){t.move()}}]),a}(e),n=function(e){function a(){_classCallCheck(this,a),_get(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}return _inherits(a,e),_createClass(a,[{key:"handleEvent",value:function(e,a){switch(a){case t.EndContact:e.setState(States.MonsterMove)}}},{key:"update",value:function(t){t.tryAttack()}}]),a}(e),i=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"handleEvent",value:function(t,e){}},{key:"update",value:function(t){}}]),e}(e);States.Monster=e,States.MonsterMove=new a,States.MonsterAttack=new n,States.MonsterDead=new i}();
//# sourceMappingURL=game.js.map